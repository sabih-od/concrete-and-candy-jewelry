// // SLIDER
function mainSlider1Init() {
    var interleaveOffset = 0.5;
    var swiperOptions = {
        loop: true,
        speed: 1000,
        parallax: true,
        autoplay: false,
        grabCursor: false,
        pagination: {
            el: '.swiper-pagination',
            clickable: true
                // type: "fraction",
        },
    };
    var homeSlider = new Swiper('.homeSlider', swiperOptions);
    var pageSection = $('.bg-image');
    pageSection.each(function(indx) {
        if ($(this).attr('data-background')) {
            $(this).css('background-image', 'url(' + $(this).data('background') + ')');
        }
    });
}
mainSlider1Init();

$('a[href="#search"]').on('click', function(event) {
    event.preventDefault();
    $('#search').addClass('open');
    $('#search > form > input[type="search"]').focus();
});

$('#search, #search button.close').on('click keyup', function(event) {
    if (event.target == this || event.target.className == 'close' || event.keyCode == 27) {
        $(this).removeClass('open');
    }
});

//gsap loader
const tl = gsap.timeline({
    duration: 0.1,
});

function preLoader(tl) {
    tl.to(".preLoader.black > img", {
            scale: 1.25,
            autoAlpha: 0,
        })
        .to(".preLoader.black", {
            yPercent: 100,
        })
        .to(".preLoader.white", {
            xPercent: -100,
        })
        .to(".preLoader", {
            css: {
                display: "none",
            },
        })
        .from(
            ".navbar-brand > img", {
                x: -50,
                autoAlpha: 0,
            },
            "-=1"
        )
        .from(
            ".navbar-nav", {
                autoAlpha: 0,
                x: 100,
                stagger: 0.05,
            },
            "-=1"
        )
        .from(
            ".form-inline", {
                autoAlpha: 0,
                x: 100,
                stagger: 0.05,
            },
            "-=1"
        )
        .from(
            ".slideOne", {
                autoAlpha: 0,
                yPercent: 100,
                stagger: 0.05,
            },
            "-=1"
        );
}

// function initialization
$(window).on("load", function() {
    preLoader(tl);
});

var instaSlider = new Swiper('.instaSlider', {
    loop: true,
    autoplay: true,
    slidesPerView: 1,
    spaceBetween: 10,
    // If we need pagination

    breakpoints: {
        1024: {
            slidesPerView: 4,
            spaceBetween: 30
        },
        768: {
            slidesPerView: 3,
            spaceBetween: 20
        },
        640: {
            slidesPerView: 2,
            spaceBetween: 10
        },
        576: {
            slidesPerView: 1,
            spaceBetween: 10
        },
        375: {
            slidesPerView: 1,
            spaceBetween: 10
        }
    },

    // Navigation arrows
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev'
    },
    // And if we need scrollbar
    scrollbar: {
        el: '.swiper-scrollbar'
    }
});

$(function() {
    AOS.init({
        duration: 1200,
        disable: 'mobile'
    });

    if (document.querySelector(".qtybox")) {

        function updateQuantity(n) {
            const textbox = document.querySelector(".qtybox .textbox");
            let currentValue = parseInt(textbox.value);

            if (currentValue > 1 || n !== -1) {
                currentValue += n;
                textbox.value = currentValue;
            }
        }

        document.querySelector(".qtybox .subbtn").addEventListener('click', () => updateQuantity(-1));
        document.querySelector(".qtybox .addbtn").addEventListener('click', () => updateQuantity(1));
    }
});

const lenis = new Lenis();

function raf(time) {
    lenis.raf(time);
    requestAnimationFrame(raf);
}

requestAnimationFrame(raf);

function replaceHash() {
    document.querySelectorAll("a").forEach((a) => {
        let href = a.getAttribute("href");
        a.href = href ?
            href.startsWith("#") && href.endsWith("#") ?
            href.replace("#", "javascript:;") :
            href :
            "javascript:;";
    });
}
replaceHash();

$("#slider-range").slider({
    range: true,
    min: 1,
    max: 50,
    values: [10, 15],
    slide: function(event, ui) {
        $("#fromday").html(ui.values[0]);
        $("#today").html(ui.values[1]);
    },
});
$("#fromday").html($("#slider-range").slider("values", 0));
$("#today").html($("#slider-range").slider("values", 1));